---
- name: update packages
  dnf:
     name: "*"
     state: latest

- name: install the 'Development tools' package group
  dnf:
     name: "@Development tools"
     state: present

- name: install plugins core
  dnf:
     name: dnf-plugins-core
     state: latest

- name: get Fedora version
  command: rpm -E %fedora
  register: fedora_version
  args:
     warn: false

- name: install rpmfusion
  dnf:
     name:
        - "https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-{{ fedora_version.stdout }}.noarch.rpm"
        - "https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-{{ fedora_version.stdout }}.noarch.rpm"
     state: latest

- name: Install basic packages
  package:
     name:
        - curl
        - chromium
        - filezilla
        - flatpak
        - fuse-exfat
        - gimp
        - git
        - gnupg2
        - htop
        - i3
        - neofetch
        - nnn
        - podman
        - ranger
        - ripgrep
        - texlive-scheme-tetex
        - the_silver_searcher
        - tilix
        - tmux
        - trash-cli
        - util-linux-user
        - vagrant
        - vim
        - VirtualBox
        - vlc
        - zsh
     state: present
     update_cache: yes

- name: Add the flathub flatpak repository remote to the user installation
  flatpak_remote:
     name: flathub
     state: present
     flatpakrepo_url: https://dl.flathub.org/repo/flathub.flatpakrepo
     method: user
